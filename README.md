# Лабораторна робота 2

## Завдання

1. Удосконаліть систему, яка дозволяє бібліотекареві керувати предметами (книгами, DVD) та клієнтами.
2. Покрити тестами функціональність програми.

## Функціональність програми

1. Додавати предмети (книги, DVD) до бібліотеки.
2. Видаляти предмети з бібліотеки.
3. Реєструвати читача.
4. Видавати предмет читачеві.
5. Повертати предмет у бібліотеку.
6. Показувати список доступних предметів.
7. Показувати список взятих предметів та їхніх читачів

## План розробки

Було створено наступні класи

### Item (Абстрактний клас)

**Атрибути:**

-   `title`: Рядок
-   `uniqueID`: Рядок (унікальний для кожного предмета)
-   `isBorrowed`: булеве значення (за замовчуванням false)

**Методи:**

-   Конструктори, геттери, сеттери
-   `abstract void borrowItem()`: Позначає предмет як позичений.
-   `abstract void returnItem()`: Позначає предмет як не позичений.

### Book (реалізує Item)

**Атрибути:**

-   `author`: Рядок

**Методи:**

-   `borrowItem()`: Реалізує абстрактний метод з Item.
-   `returnItem()`: Реалізує абстрактний метод з Item.

### DVD (реалізує Item)

**Атрибути:**

-   `duration`: ціле число (хвилини)

**Методи:**

-   `borrowItem()`: Реалізує абстрактний метод з Item.
-   `returnItem()`: Реалізує абстрактний метод з Item.

### Patron

**Атрибути:**

-   `name`: Рядок
-   `ID`: Рядок (унікальний для кожного читача)
-   `borrowedItems`: Список Item

**Методи:**

-   Конструктори, геттери, сеттери
-   `borrow(Item)`: Додає предмет до списку позичених читача.
-   `return(Item)`: Видаляє предмет зі списку позичених читача.

### IManageable (Інтерфейс)

**Методи:**

-   `add(Item)`: Додає предмет.
-   `remove(Item)`: Видаляє предмет.
-   `listAvailable()`: Виводить список доступних предметів.
-   `listBorrowed()`: Виводить список позичених предметів.

### Library (реалізує IManageable)

**Атрибути:**

-   `items`: Список Item (для збереження всіх предметів)
-   `patrons`: Список Patron (для збереження всіх зареєстрованих читачів)

**Методи:**

-   `registerPatron(Patron)`: Реєструє нового читача.
-   `lendItem(Patron, Item)`: Позичає предмет читачу.
-   `returnItem(Patron, Item)`: Повертає позичений предмет.

### Структура проекту

Класи в цьому проекті взаємопов'язані наступним чином:

-   **Item (Абстрактний клас)** діє як базовий абстрактний клас для предметів у бібліотеці, містя загальні атрибути та методи для всіх предметів.

-   **Book (реалізує Item)** та **DVD (реалізує Item)** є конкретними класами, які реалізують інтерфейс Item. Вони успадковують атрибути та методи з базового класу Item та додають власні атрибути та реалізацію абстрактних методів.

-   **Patron** представляє читача бібліотеки та включає атрибути для відстеження інформації про читача та список позичених предметів.

-   **IManageable (Інтерфейс)** визначає структуру методів, які повинні бути реалізовані в класі Library для управління бібліотекою.

-   **Library (реалізує IManageable)** є центральним класом, який об'єднує всі інші класи. Він містить списки предметів та читачів. Крім того, він реалізує методи для додавання та видалення предметів, реєстрації читачів, видачі та повернення предметів читачам, а також відображення списків доступних та позичених предметів.

### Що використовувалось?

Під час роботи над проектом було використано такі інструменти як:

#### Lombok

Бібліотека, що включає у себе анотації для зменшення розміру коду, що покращує його читабельність
У даному проекті було використано такі анотації:

-   `Data` - для автоматичного створення геттерів та сеттерів для моделей
-   `EqualsAndHashCode` - використовувалась для створення методів `equals` та `hashCode` для моделей
-   `ToString` - використовувалась з метою додати вивід властивостей моделі при виведенні до консолі

### Створення тестів

В даному розділі представлені результати тестування програмного забезпечення за допомогою набору тестів для декількох класів.

#### Тести класу `BookTest`

У класі `BookTest` тестується функціональність класу `Book`, який представляє собою книгу.

1. **Тест `testBorrowItem`**: Цей тест перевіряє можливість взяття книги в бібліотеці та зміну стану книги на "позичена". Тобто тестує метод `borrowItem` класу `Book`.
2. **Тест `testReturnItem`**: Цей тест перевіряє можливість повернення книги в бібліотеку та зміну стану книги на "не позичена". Тобто тестує метод `returnItem` класу `Book`.

#### Тести класу `DVDTest`

У класі `DVDTest` тестується функціональність класу `DVD`, який представляє собою DVD-диск.

1. **Тест `testBorrowItem`**: Цей тест перевіряє можливість взяття DVD-диску в бібліотеці та зміну стану DVD-диску на "позичений". Тобто тестує метод `borrowItem` класу `DVD`.
2. **Тест `testReturnItem`**: Цей тест перевіряє можливість повернення DVD-диску в бібліотеку та зміну стану DVD-диску на "не позичений". Тобто тестує метод `returnItem` класу `DVD`.

#### Тести класу `LibraryTest`

У класі `LibraryTest` тестується функціональність класу `Library`, який представляє бібліотеку та взаємодію з патронами та предметами.

1. **Тест `testRegisterPatron`**: Цей тест перевіряє можливість зареєструвати патрона в бібліотеці. Тобто тестує метод `registerPatron` класу `Library`.
2. **Тест `testLendItem`**: Цей тест перевіряє можливість позичення предмету патрону та відображення правильного стану позичення предмету та патрона. Тобто тестує метод `lendItem` класу `Library`.
3. **Тест `testReturnItem`**: Цей тест перевіряє можливість повернення позиченого предмету в бібліотеку та відображення правильного стану предмету та патрона. Тобто тестує метод `returnItem` класу `Library`.
4. **Тест `testGetAvailable`**: Цей тест перевіряє, чи метод `getAvailable` класу `Library` правильно повертає список доступних предметів в бібліотеці.

### Висновок

Тести успішно пройшли, і функціональність вказаних класів працює правильно згідно зі специфікацією. Тести допомагають переконатися в правильному функціонуванні програми та виявити можливі помилки та проблеми.

#### Розділ: Ознайомлення із Code Smells та Впровадження Змін

У цьому розділі звіту розглядається ознайомлення з поняттям "Code Smells" та внесені зміни в проект, спрямовані на покращення його архітектури та підтримку коду у хорошому стані.

#### Ознайомлення із Code Smells

Code Smells - це найпоширеніші проблеми в коді, які вказують на можливі проблеми в архітектурі, зрозумінні коду та його підтримці. Ці "запахи" можуть призводити до зростання складності коду та збільшення його вразливості.

У процесі ознайомлення із Code Smells були виявлені такі проблеми у вихідному коді проекту:

1. **Дублювання коду (DRY принцип)**: Багато класів містили схожий код для генерації та роботи з унікальними ідентифікаторами. Це призводило до збільшення обсягу коду та потенційних помилок у майбутньому.

2. **Прив'язка до конкретної реалізації (не збереження інтерфейсу)**: Деякі класи вимагали працювати з конкретними реалізаціями інших класів, що обмежувало їх функціональність та зручність використання.

#### Внесені Зміни

Для вирішення знайдених проблем були внесені наступні зміни:

1. **Створення класу `BaseModel` для управління id**: Для уникнення дублювання коду та полегшення роботи з унікальними ідентифікаторами було створено клас `BaseModel`, який містить логіку генерації унікальних id та методи для їх отримання.

2. **Використання принципу DRY**: Інтегруючи логіку генерації id у клас `BaseModel`, інші класи стали легше читабельними та більш підтримуваними.

3. **Впровадження інтерфейсу `IItem`**: Додавання інтерфейсу `IItem` допомагає зменшити прив'язку до конкретної реалізації, підвищує гнучкість та забезпечує можливість створення різних видів предметів.
