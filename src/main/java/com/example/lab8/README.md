# Лабораторна робота 8

Аналіз глобальних метеорологічних даних через HTTP запити використовуючи Java Streams

## Функціональність

-   Взаємодія з API
-   Аналіз екстремальних погодних умов
-   Розпізнавання патернів
-   Агрегація та підсумкова статистика
-   Відображення результатів у формі таблиці

## Вимоги

-   Кожен запис даних відповідає спостереженню погоди за один день на конкретній станції.
-   Поля: Дата (РРРР-ММ-ДД), ID станції, Температура (Цельсій), Вологість (%), Опади (мм), Швидкість вітру (м/с).
-   Потрібно використовувати комбінацію фільтрації, відображення та групування у Java Streams.
-   Відображення даних у вигляді таблиці, або графіка

1. Взаємодія з API

    - Виконайте HTTP-запит до метеорологічного API для отримання даних.
    - Обробіть отримані дані і перетворіть їх у потрібний формат.

2. Аналіз екстремальних погодних умов

    - Знайдіть 10 найгарячіших та найхолодніших станцій за середньою температурою.
    - Знайдіть 10 найвологіших станцій за середнім рівнем опадів.

3. Розпізнавання патернів

    - Визначте станції, на яких було більше 7 послідовних днів опадів.
    - Визначте станції, на яких температура зросла на щонайменше 5°C протягом 5 послідовних днів.

4. Агрегація та підсумкова статистика

    - Розрахуйте середню глобальну температуру, вологість та рівень опадів для кожного місяця.
    - Визначте місяць з найвищою середньою швидкістю вітру.

## Реалізація

### Entities

-   [`Station`](./entities/Station.java) використовується для того, щоб описати станцію на якій проводяться виміри погоди. Зберігає координати та id станції.
-   [`WeatherData`](./entities/HourMeasurement.java) є представленням збірної інформації про погодні умови за конктретну дату на конкретній станції.
-   [`HourMeasurement`](./entities/WeatherData.java) є представленням одиниці інформації про погоду у визначений момент.

### Завантаження даних

Клас [OpenMeteoService](./service/OpenMeteoService.java) слугує для завантаження даних у форматі `json` та його парсингу за допомогою `WeatherHourlyDataMapper` у `WeatherHourlyDataDTO`. Сервіс містить логіку обробки у формат `WeatherData` за допомогою класу `DataAnalysis`. На цьому етапі ми отримуємо дані для необхідної странції для кожного дня.

### Аналіз даних

Перед нами стоїть задача, яка включає в себе групування, обробку, сортування та отримання вибірки з певного обсягу даних.
Для цього було створено клас [`DataAnalysis`](./analysis/DataAnalysis.java). Він створений за допомогою патерна builder, що допомагає нам гнучко конфігурувати клас для наших потреб. Після конфігурації можна проводити аналіз необхідних даних. Використання Generic дає можливість використовувати цей клас не тільки для аналізу погоди, а й для роботи з іншими даними.

З метою дотриманя Open-Closed принципу, також було створено клас [`DataAnalysisUtil`](./util/DataAnalysisUtil.java), що містить готові функції, що відносяться до предметної галузці обробки даних. Ці функції розширюють функціонал `DataAnalysis` та допомагають писати код, що не повторюється.

### Відображення даних

Відображення даних реалізовано у вигляді таблиці за допомогою бібліотеки asciitable.
